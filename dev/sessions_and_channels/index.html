<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Sessions and Channels · LibSSH</title><meta name="title" content="Sessions and Channels · LibSSH"/><meta property="og:title" content="Sessions and Channels · LibSSH"/><meta property="twitter:title" content="Sessions and Channels · LibSSH"/><meta name="description" content="Documentation for LibSSH."/><meta property="og:description" content="Documentation for LibSSH."/><meta property="twitter:description" content="Documentation for LibSSH."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">LibSSH</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">LibSSH.jl</a></li><li><a class="tocitem" href="../examples/">Examples</a></li><li class="is-active"><a class="tocitem" href>Sessions and Channels</a><ul class="internal"><li><a class="tocitem" href="#Sessions"><span>Sessions</span></a></li><li><a class="tocitem" href="#Channels"><span>Channels</span></a></li></ul></li><li><a class="tocitem" href="../sftp/">SFTP</a></li><li><a class="tocitem" href="../server_support/">Server support</a></li><li><a class="tocitem" href="../utilities/">Utilities</a></li><li><a class="tocitem" href="../bindings/">Low-level bindings</a></li><li><a class="tocitem" href="../generated_changelog/">Changelog</a></li><li><a class="tocitem" href="../contributing/">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Sessions and Channels</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Sessions and Channels</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaWeb/LibSSH.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaWeb/LibSSH.jl/blob/master/docs/src/sessions_and_channels.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Sessions-and-Channels"><a class="docs-heading-anchor" href="#Sessions-and-Channels">Sessions and Channels</a><a id="Sessions-and-Channels-1"></a><a class="docs-heading-anchor-permalink" href="#Sessions-and-Channels" title="Permalink"></a></h1><p><em>The symbols documented on this page are intended to be safe. They may throw exceptions but they should never cause memory corruptions or segfaults if used correctly.</em></p><p>This documents the high-level API around SSH sessions and channels, which is almost everything you need to care about to create a SSH client.</p><ul><li><a href="#Sessions-and-Channels">Sessions and Channels</a></li><li class="no-marker"><ul><li><a href="#Sessions">Sessions</a></li><li><a href="#Channels">Channels</a></li><li class="no-marker"><ul><li><a href="#Channel-operations">Channel operations</a></li><li class="no-marker"><ul><li><a href="#Command-execution">Command execution</a></li><li><a href="#Direct-port-forwarding">Direct port forwarding</a></li></ul></li></ul></li></ul></li></ul><hr/><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.AuthMethod" href="#LibSSH.AuthMethod"><code>LibSSH.AuthMethod</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">primitive type AuthMethod &lt;: Enum{Int32} 32</code></pre><p>Enum for the different authentication methods libssh supports:</p><ul><li><code>AuthMethod_Unknown</code></li><li><code>AuthMethod_None</code></li><li><code>AuthMethod_Password</code></li><li><code>AuthMethod_PublicKey</code></li><li><code>AuthMethod_HostBased</code></li><li><code>AuthMethod_Interactive</code></li><li><code>AuthMethod_GSSAPI_MIC</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/LibSSH.jl#L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.AuthStatus" href="#LibSSH.AuthStatus"><code>LibSSH.AuthStatus</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">primitive type AuthStatus &lt;: Enum{Int32} 32</code></pre><p>Enum for the possible authentication responses from a server:</p><ul><li><code>AuthStatus_Error</code></li><li><code>AuthStatus_Denied</code></li><li><code>AuthStatus_Partial</code></li><li><code>AuthStatus_Success</code></li><li><code>AuthStatus_Info</code></li><li><code>AuthStatus_Again</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/LibSSH.jl#L37">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.lib.LibSSHException" href="#LibSSH.lib.LibSSHException"><code>LibSSH.lib.LibSSHException</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct LibSSHException &lt;: Exception</code></pre><p>A custom exception type to represent errors from libssh&#39;s C API.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/bindings.jl#L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.KnownHosts" href="#LibSSH.KnownHosts"><code>LibSSH.KnownHosts</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">primitive type KnownHosts &lt;: Enum{Int32} 32</code></pre><p>Enum for the result of checking a servers public key in the users known hosts file. See <a href="#LibSSH.is_known_server"><code>is_known_server()</code></a>.</p><ul><li><code>KnownHosts_Ok</code></li><li><code>KnownHosts_Changed</code></li><li><code>KnownHosts_Other</code></li><li><code>KnownHosts_Unknown</code></li><li><code>KnownHosts_NotFound</code></li><li><code>KnownHosts_Error</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/LibSSH.jl#L57">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.HostVerificationException" href="#LibSSH.HostVerificationException"><code>LibSSH.HostVerificationException</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct HostVerificationException &lt;: Exception</code></pre><ul><li><p><code>msg::String</code></p></li><li><p><code>status::LibSSH.KnownHosts</code></p></li></ul><p>Represents a failed host verification. See the <code>status</code> field for the exact reason.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/LibSSH.jl#L97">source</a></section></article><h2 id="Sessions"><a class="docs-heading-anchor" href="#Sessions">Sessions</a><a id="Sessions-1"></a><a class="docs-heading-anchor-permalink" href="#Sessions" title="Permalink"></a></h2><p>An SSH session represents a connection between a client and a remote server. A session must be authenticated before being able to do anything with it.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Also see the <a href="https://api.libssh.org/stable/libssh_tutor_guided_tour.html">upstream tutorial</a>.</p></div></div><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.Session" href="#LibSSH.Session"><code>LibSSH.Session</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct Session</code></pre><ul><li><p><code>ptr::Union{Nothing, Ptr{LibSSH.lib.ssh_session_struct}}</code></p></li><li><p><code>owning::Bool</code></p></li><li><p><code>closeables::Vector{Any}</code></p></li><li><p><code>server_callbacks::Union{Nothing, LibSSH.Callbacks.ServerCallbacks}</code></p></li><li><p><code>log_verbosity::Int64</code></p></li><li><p><code>ssh_dir::Union{Nothing, String}</code></p></li><li><p><code>known_hosts::Union{Nothing, String}</code></p></li><li><p><code>gssapi_server_identity::Union{Nothing, String}</code></p></li><li><p><code>process_config::Bool</code></p></li><li><p><code>_lock::ReentrantLock</code></p></li><li><p><code>_auth_methods::Union{Nothing, Vector{LibSSH.AuthMethod}}</code></p></li><li><p><code>_attempted_auth_methods::Vector{LibSSH.AuthMethod}</code></p></li><li><p><code>_require_init_kbdint::Bool</code></p></li><li><p><code>_waiter_request::Base.Event</code></p></li><li><p><code>_wakeup::LibSSH.CloseableCondition</code></p></li><li><p><code>_waiter_stop_flag::Bool</code></p></li><li><p><code>_waiter_task::Task</code></p></li></ul><p>Represents an SSH session. Note that some properties such as the host and port are implemented in <code>getproperty()</code>/<code>setproperty!()</code> by using the internal values of the <code>ssh_session</code>, i.e. they aren&#39;t simply fields of the struct. A <code>Session</code> may be owning or non-owning of its internal pointer to a <code>lib.ssh_session</code>.</p><p>It must be closed explicitly with <a href="#Base.close-Tuple{LibSSH.Session}"><code>Base.close(::Session)</code></a> or it will leak memory.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.Session-Tuple{Union{AbstractString, Sockets.IPAddr}}" href="#LibSSH.Session-Tuple{Union{AbstractString, Sockets.IPAddr}}"><code>LibSSH.Session</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Session(
    host::Union{AbstractString, Sockets.IPAddr};
    ...
) -&gt; LibSSH.Session
Session(
    host::Union{AbstractString, Sockets.IPAddr},
    port;
    socket,
    user,
    log_verbosity,
    auto_connect,
    process_config
) -&gt; LibSSH.Session
</code></pre><p>Constructor for creating a client session. Use this if you want to connect to a server.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>By default libssh will try to follow the settings in any found SSH config files. If a proxyjump is configured for <code>host</code> libssh will try to set up the proxy itself, which usually does not play well with Julia&#39;s event loop. In such situations you will probably want to pass <code>process_config=false</code> and set up the proxyjump explicitly using a <a href="#LibSSH.Forwarder"><code>Forwarder</code></a>.</p></div></div><p><strong>Throws</strong></p><ul><li><a href="#LibSSH.lib.LibSSHException"><code>LibSSHException</code></a>: if a session couldn&#39;t be created, or there was an error initializing the <code>user</code> property.</li></ul><p><strong>Arguments</strong></p><ul><li><code>host</code>: The host to connect to.</li><li><code>port=22</code>: The port to connect to.</li><li><code>socket=nothing</code>: Can be an open <code>TCPSocket</code> or <code>RawFD</code> to connect to directly. If this is not <code>nothing</code> it will be used instead of <code>port</code>. You will need to close the socket afterwards, the <code>Session</code> will not do it for you.</li><li><code>user=nothing</code>: Set the user to connect as. If unset the current  username will be used.</li><li><code>log_verbosity=nothing</code>: Set the log verbosity for the session.</li><li><code>auto_connect=true</code>: Whether to automatically call <a href="#LibSSH.connect"><code>connect()</code></a>.</li><li><code>process_config=true</code>: Whether to process any found SSH config files.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; import LibSSH as ssh
julia&gt; session = ssh.Session(&quot;foo.org&quot;)
julia&gt; session = ssh.Session(ip&quot;12.34.56.78&quot;, 2222)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L135">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.Session-Tuple{Ptr{LibSSH.lib.ssh_session_struct}}" href="#LibSSH.Session-Tuple{Ptr{LibSSH.lib.ssh_session_struct}}"><code>LibSSH.Session</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Session(
    ptr::Ptr{LibSSH.lib.ssh_session_struct};
    log_verbosity,
    own
) -&gt; LibSSH.Session
</code></pre><p>This is only useful if you already have a <code>ssh_session</code> (i.e. in a server). Do not use it if you want a client, use the host/port constructor.</p><p><strong>Arguments</strong></p><ul><li><code>ptr</code>: A pointer to the <code>lib.ssh_session</code> to wrap.</li><li><code>log_verbosity=nothing</code>: Set the log verbosity for the  session. This argument will be ignored if <code>own</code> is <code>false</code> to avoid  accidentally changing the logging level in callbacks when non-owning  Sessions are created. You can still set the logging level explicitly with  <code>session.log_verbosity</code> if necessary.</li><li><code>own=true</code>: Whether to take ownership of <code>ptr</code>, i.e. whether to register a finalizer to free the memory.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L51">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.Session-Tuple{Function}" href="#LibSSH.Session-Tuple{Function}"><code>LibSSH.Session</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Session(f::Function, args...; kwargs...) -&gt; Any
</code></pre><p>Do-constructor for <a href="../bindings/#Session"><code>Session</code></a>. All arguments are forwarded to the other constructors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L218">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.connect" href="#LibSSH.connect"><code>LibSSH.connect</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">connect(session::LibSSH.Session)
</code></pre><p>This will throw an exception if connecting fails. You shouldn&#39;t need this unless you&#39;ve created a session with <code>Session(; auto_connect=false)</code>.</p><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_connect-Tuple{Any}"><code>lib.ssh_connect()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L479">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.disconnect" href="#LibSSH.disconnect"><code>LibSSH.disconnect</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">disconnect(session::LibSSH.Session)
</code></pre><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_disconnect-Tuple{Any}"><code>lib.ssh_disconnect()</code></a>.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This will close all channels created from the session.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L507">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.isconnected" href="#LibSSH.isconnected"><code>LibSSH.isconnected</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">isconnected(session::LibSSH.Session) -&gt; Bool
</code></pre><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_is_connected-Tuple{Any}"><code>lib.ssh_is_connected()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L532">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.is_known_server" href="#LibSSH.is_known_server"><code>LibSSH.is_known_server</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">is_known_server(
    session::LibSSH.Session;
    throw
) -&gt; LibSSH.KnownHosts
</code></pre><p>Check if the connected servers public key exists in the SSH known hosts file.</p><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If the session isn&#39;t connected.</li><li><a href="#LibSSH.HostVerificationException"><code>HostVerificationException</code></a>: If verification failed and <code>throw</code> is <code>true</code>.</li></ul><p><strong>Arguments</strong></p><ul><li><code>throw=true</code>: Whether to throw a <a href="#LibSSH.HostVerificationException"><code>HostVerificationException</code></a> if the verification fails, otherwise the function will just return the verification status.</li></ul><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_session_is_known_server-Tuple{Any}"><code>lib.ssh_session_is_known_server()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L566">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.get_server_publickey" href="#LibSSH.get_server_publickey"><code>LibSSH.get_server_publickey</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_server_publickey(
    session::LibSSH.Session
) -&gt; LibSSH.PKI.SshKey
</code></pre><p>Get the public key from server of a connected session.</p><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If the session isn&#39;t connected.</li><li><code>LibSSHException</code>: If there was an internal error.</li></ul><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_get_server_publickey-Tuple{Any, Any}"><code>lib.ssh_get_server_publickey()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L541">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.update_known_hosts" href="#LibSSH.update_known_hosts"><code>LibSSH.update_known_hosts</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">update_known_hosts(session::LibSSH.Session)
</code></pre><p>Update the users known hosts file with the sessions server key.</p><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If the session isn&#39;t connected.</li><li><code>LibSSHException</code>: If there was an internal error.</li></ul><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_session_update_known_hosts-Tuple{Any}"><code>lib.ssh_session_update_known_hosts()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L597">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.authenticate" href="#LibSSH.authenticate"><code>LibSSH.authenticate</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">authenticate(
    session::LibSSH.Session;
    password,
    kbdint_answers,
    throw
) -&gt; Union{LibSSH.AuthMethod, LibSSH.AuthStatus, LibSSH.KnownHosts}
</code></pre><p>This is a helper function that boldly attempts to handle the entire authentication flow by figuring out which authentication methods are still available and calling the appropriate functions for you. It may need to be called multiple times to complete authentication, the idea is that it will only return when user input is needed (e.g. for a password, or to accept a host key, etc).</p><p>It can return any of:</p><ul><li>A <a href="#LibSSH.KnownHosts"><code>KnownHosts</code></a> to indicate that host verification failed in some way. It will not return <code>KnownHosts_Ok</code>.</li><li>A <a href="#LibSSH.AuthStatus"><code>AuthStatus</code></a> to indicate that authentication finished in some way. The caller doesn&#39;t need to do anything else in this case but may retry authenticating. It will not return <code>AuthStatus_Info</code>/<code>AuthStatus_Again</code>/<code>AuthStatus_Partial</code>.</li><li>A <a href="#LibSSH.AuthMethod"><code>AuthMethod</code></a> to indicate the next method to try. This is only returned for auth methods that require user input (i.e. <code>AuthMethod_Password</code> or <code>AuthMethod_Interactive</code>), and the caller must pass the user input next time they call <code>authenticate()</code>.</li></ul><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>If you&#39;re using this function do <em>not</em> call any of the other <code>userauth_*</code> functions, except for <a href="#LibSSH.userauth_kbdint_getprompts"><code>userauth_kbdint_getprompts()</code></a> to get the server prompts if necessary. <code>authenticate()</code> maintains some internal state to keep track of where it is in authentication, which can be messed up by calling other auth methods yourself.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p><code>authenticate()</code> is quite experimental, we suggest testing it with <a href="#LibSSH.authenticate_cli"><code>authenticate_cli()</code></a> to verify it works on the servers you&#39;re authenticating to.</p></div></div><p><strong>Arguments</strong></p><ul><li><code>session</code>: The <a href="../bindings/#Session"><code>Session</code></a> to authenticate.</li><li><code>password=nothing</code>: A password to authenticate with. Pass this if <code>authenticate()</code> previously returned <code>AuthMethod_Password</code>.</li><li><code>kbdint_answers=nothing</code>: Answers to keyboard-interactive prompts from the server. Use <a href="#LibSSH.userauth_kbdint_getprompts"><code>userauth_kbdint_getprompts()</code></a> to get the prompts if <code>authenticate()</code> returns <code>AuthMethod_Interactive</code> and then pass the answers in the next call.</li><li><code>throw=true</code>: Whether to throw if there&#39;s an internal error while authenticating (<code>AuthStatus_Error</code>).</li></ul><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If the session isn&#39;t connected, or if both <code>password</code> and <code>kbdint_answers</code> are passed.</li><li><code>ErrorException</code>: If there are no more supported authentication methods available.</li><li><code>LibSSHException</code>: If there&#39;s an internal error and <code>throw=true</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L656">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.authenticate_cli" href="#LibSSH.authenticate_cli"><code>LibSSH.authenticate_cli</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">authenticate_cli(
    session::LibSSH.Session
) -&gt; Union{LibSSH.AuthStatus, LibSSH.KnownHosts}
</code></pre><p>Meant to mimic authenticating with the <code>ssh</code> command by calling <a href="#LibSSH.authenticate"><code>authenticate()</code></a> in a loop while prompting the user if necessary. It&#39;s useful to use this at the REPL to test whether the server can be authenticated to at all.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; session = ssh.Session(&quot;test.com&quot;; user=&quot;myuser&quot;)
LibSSH.Session(host=test.com, port=22, user=myuser, connected=true)

julia&gt; ssh.authenticate_cli(session)
Password:
[ Info: AuthStatus_Info
One-time password:
[ Info: AuthStatus_Success
AuthStatus_Success::AuthStatus = 0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L803">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.userauth_list" href="#LibSSH.userauth_list"><code>LibSSH.userauth_list</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">userauth_list(
    session::LibSSH.Session;
    call_auth_none
) -&gt; Vector{LibSSH.AuthMethod}
</code></pre><p>Get a list of support authentication methods from the server. This will automatically call <a href="#LibSSH.userauth_none"><code>userauth_none()</code></a> beforehand if <code>call_auth_none=true</code> (the default).</p><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If the session isn&#39;t connected.</li></ul><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_userauth_list-Tuple{Any, Any}"><code>lib.ssh_userauth_list()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L919">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.userauth_none" href="#LibSSH.userauth_none"><code>LibSSH.userauth_none</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">userauth_none(
    session::LibSSH.Session;
    throw
) -&gt; LibSSH.AuthStatus
</code></pre><p>Attempt to authenticate to the server without any credentials. This authentication method is always disabled in practice, but it&#39;s still useful to check which authentication methods the server supports (see <a href="#LibSSH.userauth_list"><code>userauth_list()</code></a>).</p><p><strong>Arguments</strong></p><ul><li><code>session</code>: The session to authenticate.</li><li><code>throw=true</code>: Whether to throw if there&#39;s an internal error while authenticating (<code>AuthStatus_Error</code>).</li></ul><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If the session isn&#39;t connected.</li><li><code>LibSSHException</code>: If there was an internal error, unless <code>throw=false</code>.</li></ul><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_userauth_none-Tuple{Any, Any}"><code>lib.ssh_userauth_none()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L882">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.userauth_password" href="#LibSSH.userauth_password"><code>LibSSH.userauth_password</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">userauth_password(
    session::LibSSH.Session,
    password::String;
    throw
) -&gt; LibSSH.AuthStatus
</code></pre><p>Authenticate by username and password. The username will be taken from <code>session.user</code>.</p><p><strong>Arguments</strong></p><ul><li><code>session</code>: The session to authenticate.</li><li><code>password</code>: The password to authenticate with.</li><li><code>throw=true</code>: Whether to throw if there&#39;s an internal error while authenticating (<code>AuthStatus_Error</code>).</li></ul><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If the session isn&#39;t connected.</li><li><code>LibSSHException</code>: If there was an internal error, unless <code>throw=false</code>.</li></ul><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_userauth_password-Tuple{Any, Any, Any}"><code>lib.ssh_userauth_password()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L953">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.userauth_kbdint" href="#LibSSH.userauth_kbdint"><code>LibSSH.userauth_kbdint</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">userauth_kbdint(
    session::LibSSH.Session;
    throw
) -&gt; LibSSH.AuthStatus
</code></pre><p>Attempt to authenticate with the keyboard-interactive method.</p><p><strong>Arguments</strong></p><ul><li><code>session</code>: The session to authenticate.</li><li><code>throw=true</code>: Whether to throw if there&#39;s an internal error while authenticating (<code>AuthStatus_Error</code>).</li></ul><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If the session isn&#39;t connected.</li><li><code>LibSSHException</code>: If there was an internal error, unless <code>throw=false</code>.</li></ul><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_userauth_kbdint-Tuple{Any, Any, Any}"><code>lib.ssh_userauth_kbdint</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L1029">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.userauth_kbdint_getprompts" href="#LibSSH.userauth_kbdint_getprompts"><code>LibSSH.userauth_kbdint_getprompts</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">userauth_kbdint_getprompts(
    session::LibSSH.Session
) -&gt; Vector{LibSSH.KbdintPrompt}
</code></pre><p>Returns all the keyboard-interactive prompts from the server. You should have already called <a href="#LibSSH.userauth_kbdint"><code>userauth_kbdint()</code></a>. The <code>KbdintPrompt</code> objects it returns have <code>.msg</code> and <code>.display</code> fields that hold the prompt message and whether to echo the user input (e.g. it will be <code>false</code> for a password and other sensitive input).</p><p>This is a combination of <a href="../bindings/#LibSSH.lib.ssh_userauth_kbdint_getnprompts-Tuple{Any}"><code>lib.ssh_userauth_kbdint_getnprompts()</code></a> and <a href="../bindings/#LibSSH.lib.ssh_userauth_kbdint_getprompt-Tuple{Any, Any, Any}"><code>lib.ssh_userauth_kbdint_getprompt()</code></a>. It should be preferred over the lower-level functions.</p><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If the session isn&#39;t connected.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L1064">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.userauth_kbdint_setanswers" href="#LibSSH.userauth_kbdint_setanswers"><code>LibSSH.userauth_kbdint_setanswers</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">userauth_kbdint_setanswers(
    session::LibSSH.Session,
    answers::Vector{String}
)
</code></pre><p>Sets answers for a keyboard-interactive auth session. Uses <a href="../bindings/#LibSSH.lib.ssh_userauth_kbdint_setanswer-Tuple{Any, Any, Any}"><code>lib.ssh_userauth_kbdint_setanswer</code></a> internally.</p><p><strong>Arguments</strong></p><ul><li><code>session</code>: The session to authenticate.</li><li><code>answers</code>: A vector of answers for each prompt sent by the server.</li></ul><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If the session isn&#39;t connected, or if the wrong number of answers were passed.</li><li><code>LibSSHException</code>: If setting the answers failed.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L1096">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.userauth_gssapi" href="#LibSSH.userauth_gssapi"><code>LibSSH.userauth_gssapi</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">userauth_gssapi(
    session::LibSSH.Session;
    throw
) -&gt; LibSSH.AuthStatus
</code></pre><p>Authenticate with GSSAPI. This is not available on all platforms (see <a href="../utilities/#LibSSH.Gssapi.isavailable"><code>Gssapi.isavailable()</code></a>).</p><p><strong>Arguments</strong></p><ul><li><code>session</code>: The session to authenticate.</li><li><code>throw=true</code>: Whether to throw if there&#39;s an internal error while authenticating (<code>AuthStatus_Error</code>).</li></ul><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If the session isn&#39;t connected.</li><li><code>ErrorException</code>: If GSSAPI support isn&#39;t available.</li><li><code>LibSSHException</code>: If there was an internal error, unless <code>throw=false</code>.</li></ul><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_userauth_gssapi-Tuple{Any}"><code>lib.ssh_userauth_gssapi()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L992">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.get_error-Tuple{LibSSH.Session}" href="#LibSSH.get_error-Tuple{LibSSH.Session}"><code>LibSSH.get_error</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_error(session::LibSSH.Session) -&gt; String
</code></pre><p>Get the last error set by libssh.</p><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If the session has been closed.</li></ul><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_get_error-Tuple{Any}"><code>lib.ssh_get_error()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L283">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.isopen-Tuple{LibSSH.Session}" href="#Base.isopen-Tuple{LibSSH.Session}"><code>Base.isopen</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">isopen(session::LibSSH.Session) -&gt; Bool
</code></pre><p>Check if a session is open.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L276">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.close-Tuple{LibSSH.Session}" href="#Base.close-Tuple{LibSSH.Session}"><code>Base.close</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">close(session::LibSSH.Session)
</code></pre><p>Closes a session, which will be unusable afterwards. It&#39;s safe to call this multiple times.</p><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If the session is non-owning. This is not allowed to prevent accidental double-frees.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L253">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.wait-Tuple{LibSSH.Session}" href="#Base.wait-Tuple{LibSSH.Session}"><code>Base.wait</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">wait(session::LibSSH.Session) -&gt; Any
</code></pre><p>Waits for data to be readable/writable on a session.</p><p><strong>Throws</strong></p><ul><li><code>InvalidStateException</code>: If the session is already closed, or is closed while waiting.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/session.jl#L428">source</a></section></article><h2 id="Channels"><a class="docs-heading-anchor" href="#Channels">Channels</a><a id="Channels-1"></a><a class="docs-heading-anchor-permalink" href="#Channels" title="Permalink"></a></h2><p>SSH channels are things you can create on top of a session to actually do things (like running commands, etc). You can have as many channels on a single session as you like. Channels have certain types, like an <code>exec</code> channel for running commands, and can only be used to do one thing. e.g. if you want to run two commands you must create two channels.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>The <a href="https://api.libssh.org/stable/libssh_tutor_shell.html">upstream tutorial</a> has more information about channels.</p></div></div><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.SshChannel" href="#LibSSH.SshChannel"><code>LibSSH.SshChannel</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct SshChannel</code></pre><ul><li><p><code>ptr::Union{Nothing, Ptr{LibSSH.lib.ssh_channel_struct}}</code></p></li><li><p><code>owning::Bool</code></p></li><li><p><code>session::Union{Nothing, LibSSH.Session}</code></p></li><li><p><code>close_lock::ReentrantLock</code></p></li><li><p><code>local_eof::Bool</code></p></li><li><p><code>callbacks::Union{Nothing, LibSSH.Callbacks.ChannelCallbacks}</code></p></li></ul><p>Wraps a <code>lib.ssh_channel</code>. An <code>SshChannel</code> can be owning or non-owning of a pointer to the underlying <code>lib.ssh_channel</code>, and only owning <code>SshChannel</code>s can be closed with <a href="#Base.close-Tuple{LibSSH.SshChannel}"><code>close(::SshChannel)</code></a>.</p><p>The type is named <code>SshChannel</code> to avoid confusion with Julia&#39;s own <code>Channel</code> type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.SshChannel-Tuple{LibSSH.Session}" href="#LibSSH.SshChannel-Tuple{LibSSH.Session}"><code>LibSSH.SshChannel</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SshChannel(session::LibSSH.Session) -&gt; LibSSH.SshChannel
</code></pre><p>Create a channel from an existing session. Note that creating the channel will fail unless the session is connected <em>and</em> authenticated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.SshChannel-Tuple{Function, LibSSH.Session}" href="#LibSSH.SshChannel-Tuple{Function, LibSSH.Session}"><code>LibSSH.SshChannel</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SshChannel(f::Function, session::LibSSH.Session) -&gt; Any
</code></pre><p>Do-constructor for a <code>SshChannel</code>. This will ensure that the channel is closed after <code>f()</code> completes.</p><p>Example:</p><pre><code class="language-julia hljs">data = ssh.SshChannel(session) do sshchan
    return 42
end
@assert data == 42</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L82">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.SshChannel-Tuple{Ptr{LibSSH.lib.ssh_channel_struct}, Any}" href="#LibSSH.SshChannel-Tuple{Ptr{LibSSH.lib.ssh_channel_struct}, Any}"><code>LibSSH.SshChannel</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SshChannel(ptr::Ptr{LibSSH.lib.ssh_channel_struct}; ...)
SshChannel(
    ptr::Ptr{LibSSH.lib.ssh_channel_struct},
    session;
    own
) -&gt; LibSSH.SshChannel
</code></pre><p>Wrap a <code>SshChannel</code> around an already existing <code>lib.ssh_channel</code>. Don&#39;t use this unless you know what you&#39;re doing, prefer the <a href="#LibSSH.SshChannel-Tuple{LibSSH.Session}"><code>SshChannel(::Session)</code></a> constructor instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.Callbacks.ChannelCallbacks" href="#LibSSH.Callbacks.ChannelCallbacks"><code>LibSSH.Callbacks.ChannelCallbacks</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct ChannelCallbacks</code></pre><p>Wrapper around <code>lib.ssh_channel_callbacks_struct</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/callbacks.jl#L245">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.Callbacks.ChannelCallbacks-Tuple{}" href="#LibSSH.Callbacks.ChannelCallbacks-Tuple{}"><code>LibSSH.Callbacks.ChannelCallbacks</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ChannelCallbacks(; ...) -&gt; LibSSH.Callbacks.ChannelCallbacks
ChannelCallbacks(
    userdata;
    on_data,
    on_eof,
    on_close,
    on_signal,
    on_exit_status,
    on_exit_signal,
    on_pty_request,
    on_shell_request,
    on_auth_agent_req,
    on_x11_req,
    on_pty_window_change,
    on_exec_request,
    on_env_request,
    on_subsystem_request,
    on_write_wontblock,
    on_open_response,
    on_request_response
) -&gt; LibSSH.Callbacks.ChannelCallbacks
</code></pre><p>Create a callbacks object to set on a channel. A default function is registered for each callback and it will print a warning if a callback was requested but not found, so you don&#39;t need to set all of the callbacks for the channel to work properly. The only exceptions are:</p><ul><li><code>on_write_wontblock=Returns(0)</code></li><li><code>on_open_response=Returns(nothing)</code></li><li><code>on_request_response=Returns(nothing)</code></li></ul><p>Which have default callbacks because they&#39;re always called but rarely necessary to set explicitly.</p><p>The callback functions should all match the signature <code>f(::Session, ::SshChannel, args..., userdata)</code>. Note that some argument types will automatically be converted from the C types:</p><ul><li><code>lib.ssh_session</code> -&gt; a non-owning <a href="#LibSSH.Session"><code>ssh.Session</code></a></li><li><code>lib.ssh_channel</code> -&gt; a non-owning <a href="#LibSSH.SshChannel"><code>ssh.SshChannel</code></a></li><li><code>Cstring</code> -&gt; <code>String</code></li><li><code>Cint</code>/<code>Cuint</code>/<code>Cchar</code> -&gt; <code>Int</code>/<code>UInt</code>/<code>Char</code></li></ul><p>The userdata pointer in the C callback signatures will automatically be converted to its original Julia type. Boolean argments are not yet converted from their <code>Cint</code> types to <code>Bool</code>.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Do not use <a href="#LibSSH.Session"><code>ssh.Session</code></a> or <a href="#LibSSH.SshChannel"><code>ssh.SshChannel</code></a> arguments outside the callback functions. They are temporary non-owning wrappers, and they will be unusable after the callback has been executed.</p></div></div><p><strong>Arguments</strong></p><p>All of these are also properties that can be set after creation.</p><ul><li><code>userdata</code>: An arbitrary object that will be passed to each callback  function.</li><li><a href="../bindings/#LibSSH.lib.ssh_channel_data_callback"><code>on_data</code></a>: <code>f(::Session, ::SshChannel, ::Vector{UInt8}, Int, userdata)::Int</code></li><li><a href="../bindings/#LibSSH.lib.ssh_channel_eof_callback"><code>on_eof</code></a>: <code>f(::Session, ::SshChannel, userdata)::Nothing</code></li><li><a href="../bindings/#LibSSH.lib.ssh_channel_close_callback"><code>on_close</code></a>: <code>f(::Session, ::SshChannel, userdata)::Nothing</code></li><li><a href="../bindings/#LibSSH.lib.ssh_channel_signal_callback"><code>on_signal</code></a>: <code>f(::Session, ::SshChannel, ::String, userdata)::Nothing</code></li><li><a href="../bindings/#LibSSH.lib.ssh_channel_exit_status_callback"><code>on_exit_status</code></a>: <code>f(::Session, ::SshChannel, ::Int, userdata)::Nothing</code></li><li><a href="../bindings/#LibSSH.lib.ssh_channel_exit_signal_callback"><code>on_exit_signal</code></a>: <code>f(::Session, ::SshChannel, ::String, ::Int, ::String, ::String, userdata)::Nothing</code></li><li><a href="../bindings/#LibSSH.lib.ssh_channel_pty_request_callback"><code>on_pty_request</code></a>: <code>f(::Session, ::SshChannel, ::String, ::Int, ::Int, ::Int, ::Int, userdata)::Bool</code></li><li><a href="../bindings/#LibSSH.lib.ssh_channel_shell_request_callback"><code>on_shell_request</code></a>: <code>f(::Session, ::SshChannel, userdata)::Bool</code></li><li><a href="../bindings/#LibSSH.lib.ssh_channel_auth_agent_req_callback"><code>on_auth_agent_req</code></a>: <code>f(::Session, ::SshChannel, userdata)::Nothing</code></li><li><a href="../bindings/#LibSSH.lib.ssh_channel_x11_req_callback"><code>on_x11_req</code></a>: <code>f(::Session, ::SshChannel, ::Int, ::String, ::String, ::UInt, userdata)::Nothing</code></li><li><a href="../bindings/#LibSSH.lib.ssh_channel_pty_window_change_callback"><code>on_pty_window_change</code></a>: <code>f(::Session, ::SshChannel, ::Int, ::Int, ::Int, ::Int, userdata)::Bool</code></li><li><a href="../bindings/#LibSSH.lib.ssh_channel_exec_request_callback"><code>on_exec_request</code></a>: <code>f(::Session, ::SshChannel, ::String, userdata)::Bool</code></li><li><a href="../bindings/#LibSSH.lib.ssh_channel_env_request_callback"><code>on_env_request</code></a>: <code>f(::Session, ::SshChannel, ::String, ::String, userdata)::Bool</code></li><li><a href="../bindings/#LibSSH.lib.ssh_channel_subsystem_request_callback"><code>on_subsystem_request</code></a>: <code>f(::Session, ::SshChannel, ::String, userdata)::Bool</code></li><li><a href="../bindings/#LibSSH.lib.ssh_channel_write_wontblock_callback"><code>on_write_wontblock</code></a>: <code>f(::Session, ::SshChannel, ::UInt, userdata)::Int</code></li><li><a href="../bindings/#LibSSH.lib.ssh_channel_open_resp_callback"><code>on_open_response</code></a>: <code>f(::Session, ::SshChannel, ::Bool, userdata)::Nothing</code></li><li><a href="../bindings/#LibSSH.lib.ssh_channel_request_resp_callback"><code>on_request_response</code></a>: <code>f(::Session, ::SshChannel, userdata)::Nothing</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/callbacks.jl#L260">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.set_channel_callbacks" href="#LibSSH.set_channel_callbacks"><code>LibSSH.set_channel_callbacks</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_channel_callbacks(
    sshchan::LibSSH.SshChannel,
    callbacks::LibSSH.Callbacks.ChannelCallbacks
) -&gt; LibSSH.Callbacks.ChannelCallbacks
</code></pre><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_set_channel_callbacks-Tuple{Any, Any}"><code>lib.ssh_set_channel_callbacks()</code></a>. Will throw a <a href="#LibSSH.lib.LibSSHException"><code>LibSSHException</code></a> if setting the callbacks failed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L284">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.channel_request_send_exit_status" href="#LibSSH.channel_request_send_exit_status"><code>LibSSH.channel_request_send_exit_status</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">channel_request_send_exit_status(
    sshchan::LibSSH.SshChannel,
    status::Int64
)
</code></pre><p>Sends an exit status in reponse to an exec request. Wrapper around <a href="../bindings/#LibSSH.lib.ssh_channel_request_send_exit_status-Tuple{Any, Any}"><code>lib.ssh_channel_request_send_exit_status()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L340">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.poll_loop" href="#LibSSH.poll_loop"><code>LibSSH.poll_loop</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">poll_loop(
    sshchan::LibSSH.SshChannel;
    throw
) -&gt; Union{Nothing, Int64}
</code></pre><p>Poll a (owning) channel in a loop while it&#39;s alive, which will trigger any callbacks. This function should always be called on a channel for it to work properly. It will return:</p><ul><li><code>nothing</code> if the channel was closed during the loop.</li><li>Otherwise the last result from <a href="../bindings/#LibSSH.lib.ssh_channel_poll-Tuple{Any, Any}"><code>lib.ssh_channel_poll()</code></a>, which should be checked to see if it&#39;s <code>SSH_EOF</code>.</li></ul><p><strong>Throws</strong></p><ul><li><a href="#LibSSH.lib.LibSSHException"><code>LibSSHException</code></a>: If <code>SSH_ERROR</code> is returned and <code>throw=true</code>.</li></ul><p><strong>Arguments</strong></p><ul><li><code>sshchan</code>: The <a href="#LibSSH.SshChannel"><code>SshChannel</code></a> to poll.</li><li><code>throw=true</code>: Whether to throw an exception if <code>SSH_ERROR</code> is returned.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L357">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.isassigned-Tuple{LibSSH.SshChannel}" href="#Base.isassigned-Tuple{LibSSH.SshChannel}"><code>Base.isassigned</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">isassigned(sshchan::LibSSH.SshChannel) -&gt; Bool
</code></pre><p>Check if the channel holds a valid pointer to a <code>lib.ssh_channel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L118">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.isopen-Tuple{LibSSH.SshChannel}" href="#Base.isopen-Tuple{LibSSH.SshChannel}"><code>Base.isopen</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">isopen(sshchan::LibSSH.SshChannel) -&gt; Bool
</code></pre><p>Checks if the channel is open. Wrapper around <a href="../bindings/#LibSSH.lib.ssh_channel_is_open-Tuple{Any}"><code>lib.ssh_channel_is_open()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L125">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.close-Tuple{LibSSH.SshChannel}" href="#Base.close-Tuple{LibSSH.SshChannel}"><code>Base.close</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">close(sshchan::LibSSH.SshChannel; allow_fail)
</code></pre><p>Closes the channel, and then frees its memory. To avoid the risk of double-frees, this function may only be called on <em>owning</em> <code>SshChannel</code>s. It will hold the <code>close_lock</code> of the channel during execution.</p><p><strong>Arguments</strong></p><ul><li><code>sshchan</code>: The <a href="#LibSSH.SshChannel"><code>SshChannel</code></a> to close.</li><li><code>allow_fail=false</code>: Whether to throw an exception if the call to <a href="../bindings/#LibSSH.lib.ssh_channel_close-Tuple{Any}"><code>lib.ssh_channel_close()</code></a> fails. In some cases it can fail for valid reasons, such as the socket already having been closed by the other end (this will result in a <code>Socket error: disconnected</code> error).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L139">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.eof-Tuple{LibSSH.SshChannel}" href="#Base.eof-Tuple{LibSSH.SshChannel}"><code>Base.eof</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">eof(sshchan::LibSSH.SshChannel) -&gt; Bool
</code></pre><p>Check if an EOF has been sent <em>by the remote end</em>. This does <em>not</em> imply that an EOF has been sent from the local end and thus the channel is not writable (for that, use <a href="#Base.iswritable-Tuple{LibSSH.SshChannel}"><code>iswritable(::SshChannel)</code></a>). Check <code>SshChannel.local_eof</code> to check if an EOF has been sent from the local end.</p><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_channel_is_eof-Tuple{Any}"><code>lib.ssh_channel_is_eof()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L253">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.closewrite-Tuple{LibSSH.SshChannel}" href="#Base.closewrite-Tuple{LibSSH.SshChannel}"><code>Base.closewrite</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">closewrite(
    sshchan::LibSSH.SshChannel;
    allow_fail
) -&gt; Union{Nothing, Bool}
</code></pre><p>Sends an EOF message. Calling this function will trigger any waiting callbacks.</p><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: if the channel is not writable.</li></ul><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_channel_send_eof-Tuple{Any}"><code>lib.ssh_channel_send_eof()</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>sshchan</code>: The <a href="#LibSSH.SshChannel"><code>SshChannel</code></a> to send an EOF on.</li><li><code>allow_fail=false</code>: Whether to throw an exception if the call to <a href="../bindings/#LibSSH.lib.ssh_channel_send_eof-Tuple{Any}"><code>lib.ssh_channel_send_eof()</code></a> fails. In some cases it can fail for valid reasons, such as the socket already having been closed by the other end (this will result in a <code>Socket error: disconnected</code> error).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L298">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.iswritable-Tuple{LibSSH.SshChannel}" href="#Base.iswritable-Tuple{LibSSH.SshChannel}"><code>Base.iswritable</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">iswritable(sshchan::LibSSH.SshChannel) -&gt; Bool
</code></pre><p>Check if the channel is writable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L271">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.write-Tuple{LibSSH.SshChannel, AbstractString}" href="#Base.write-Tuple{LibSSH.SshChannel, AbstractString}"><code>Base.write</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">write(
    sshchan::LibSSH.SshChannel,
    data::AbstractString;
    stderr
) -&gt; Int64
</code></pre><p>Write a string to the channel and return the number of code units written.</p><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_channel_write-Tuple{Any, Any, Any}"><code>lib.ssh_channel_write()</code></a>/<a href="../bindings/#LibSSH.lib.ssh_channel_write_stderr-Tuple{Any, Any, Any}"><code>lib.ssh_channel_write_stderr()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L212">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.write-Tuple{LibSSH.SshChannel, Vector{UInt8}}" href="#Base.write-Tuple{LibSSH.SshChannel, Vector{UInt8}}"><code>Base.write</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">write(
    sshchan::LibSSH.SshChannel,
    data::Vector{UInt8};
    stderr
) -&gt; Int64
</code></pre><p>Write a byte array to the channel and return the number of bytes written (should always match the length of the array, unless there was an error, in which case this will throw an exception).</p><p>Wrapper around <a href="../bindings/#LibSSH.lib.ssh_channel_write-Tuple{Any, Any, Any}"><code>lib.ssh_channel_write()</code></a>/<a href="../bindings/#LibSSH.lib.ssh_channel_write_stderr-Tuple{Any, Any, Any}"><code>lib.ssh_channel_write_stderr()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L225">source</a></section></article><h3 id="Channel-operations"><a class="docs-heading-anchor" href="#Channel-operations">Channel operations</a><a id="Channel-operations-1"></a><a class="docs-heading-anchor-permalink" href="#Channel-operations" title="Permalink"></a></h3><p>You should prefer using these instead of more low-level methods, if you can.</p><h4 id="Command-execution"><a class="docs-heading-anchor" href="#Command-execution">Command execution</a><a id="Command-execution-1"></a><a class="docs-heading-anchor-permalink" href="#Command-execution" title="Permalink"></a></h4><p>LibSSH.jl attempts to mimic Julia&#39;s API for running local commands with <code>run()</code> etc. But some features are not supported and we attempt to document all of the differences.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.SshProcessFailedException" href="#LibSSH.SshProcessFailedException"><code>LibSSH.SshProcessFailedException</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct SshProcessFailedException &lt;: Exception</code></pre><ul><li><code>process::LibSSH.SshProcess</code></li></ul><p>This is analogous to <code>ProcessFailedException</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L513">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.SshProcess" href="#LibSSH.SshProcess"><code>LibSSH.SshProcess</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct SshProcess</code></pre><ul><li><p><code>out::Vector{UInt8}</code></p></li><li><p><code>err::Vector{UInt8}</code></p></li><li><p><code>cmd::Union{Nothing, Cmd, String}</code></p></li><li><p><code>exitcode::Int64</code></p></li><li><p><code>_sshchan::Union{Nothing, LibSSH.SshChannel}</code></p></li><li><p><code>_task::Union{Nothing, Task}</code></p></li><li><p><code>_verbose::Bool</code></p></li></ul><p>This is analogous to <code>Base.Process</code>, it represents a command running over an SSH session. The stdout and stderr output are stored as byte arrays in <code>SshProcess.out</code> and <code>SshProcess.err</code> respectively. They can be converted to strings using e.g. <code>String(copy(process.out))</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L451">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.wait-Tuple{LibSSH.SshProcess}" href="#Base.wait-Tuple{LibSSH.SshProcess}"><code>Base.wait</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">wait(process::LibSSH.SshProcess)
</code></pre><p><strong>Throws</strong></p><ul><li><a href="#LibSSH.SshProcessFailedException"><code>SshProcessFailedException</code></a>: if <code>ignorestatus()</code> wasn&#39;t used.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L487">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.success-Tuple{LibSSH.SshProcess}" href="#Base.success-Tuple{LibSSH.SshProcess}"><code>Base.success</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">success(process::LibSSH.SshProcess) -&gt; Bool
</code></pre><p>Check if the process succeeded.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L480">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.run-Tuple{Union{Cmd, String}, LibSSH.Session}" href="#Base.run-Tuple{Union{Cmd, String}, LibSSH.Session}"><code>Base.run</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">run(
    cmd::Union{Cmd, String},
    session::LibSSH.Session;
    wait,
    verbose,
    combine_outputs,
    print_out
) -&gt; LibSSH.SshProcess
</code></pre><p>Run a command on the remote host over an SSH session. Things that aren&#39;t supported compared to <code>run()</code>:</p><ul><li>Pipelined commands (use a regular pipe like <code>foo | bar</code> instead).</li><li>Setting the directory to execute the command in.</li></ul><p>An easy way of getting around these restrictions is to pass the command as a <code>String</code> instead of <code>Cmd</code>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Setting environment variables is supported, but will fail if the server forbids setting them.</p></div></div><p><strong>Throws</strong></p><ul><li><a href="#LibSSH.SshProcessFailedException"><code>SshProcessFailedException</code></a>: if the command fails and <code>ignorestatus()</code> wasn&#39;t used.</li><li><a href="#LibSSH.lib.LibSSHException"><code>LibSSHException</code></a>: if running the command fails for some other reason.</li></ul><p><strong>Arguments</strong></p><ul><li><code>cmd</code>: The command to run. This will be converted to a string for running remotely.</li><li><code>session</code>: The session to run the command over.</li><li><code>wait=true</code>: Wait for the command to finish before returning.</li><li><code>verbose=false</code>: Print debug logging messages. Note that this is not the same as setting the <code>log_verbosity</code> on a <a href="../bindings/#Session"><code>Session</code></a>.</li><li><code>combine_outputs=true</code>: Write the <code>stderr</code> command output to the <code>IOBuffer</code> for the commands <code>stdout</code>. If this is <code>true</code> then <code>SshProcess.out</code> and <code>SshProcess.err</code> will refer to the same object.</li><li><code>print_out=true</code>: Print the output (stdout + stderr by default) of the command.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; import LibSSH as ssh

julia&gt; ssh.Demo.DemoServer(2222; password=&quot;foo&quot;) do
           session = ssh.Session(&quot;127.0.0.1&quot;, 2222)
           @assert ssh.userauth_password(session, &quot;foo&quot;) == ssh.AuthStatus_Success

           @info &quot;1&quot;
           run(`echo foo`, session)

           println()
           @info &quot;2&quot;
           run(ignorestatus(`foo`), session)

           println()
           @info &quot;3&quot;
           # Pass a string to avoid hacking around Cmd syntax
           run(&quot;cd /tmp &amp;&amp; pwd&quot;, session)
       end
[ Info: 1
foo

[ Info: 2
sh: line 1: foo: command not found

[ Info: 3
/tmp</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L586">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.read-Tuple{Union{Cmd, String}, LibSSH.Session}" href="#Base.read-Tuple{Union{Cmd, String}, LibSSH.Session}"><code>Base.read</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">read(
    cmd::Union{Cmd, String},
    session::LibSSH.Session
) -&gt; Vector{UInt8}
</code></pre><p>Read the output from the command in bytes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L680">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.read-Tuple{Union{Cmd, String}, LibSSH.Session, Type{String}}" href="#Base.read-Tuple{Union{Cmd, String}, LibSSH.Session, Type{String}}"><code>Base.read</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">read(
    cmd::Union{Cmd, String},
    session::LibSSH.Session,
    _::Type{String}
) -&gt; String
</code></pre><p>Read the output from the command as a String.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; import LibSSH as ssh

julia&gt; ssh.Demo.DemoServer(2222; password=&quot;foo&quot;) do
           session = ssh.Session(&quot;127.0.0.1&quot;, 2222)
           @assert ssh.userauth_password(session, &quot;foo&quot;) == ssh.AuthStatus_Success

           @show read(`echo foo`, session, String)
       end
read(`echo foo`, session, String) = &quot;foo\n&quot;</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L690">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.readchomp-Tuple{Union{Cmd, String}, LibSSH.Session}" href="#Base.readchomp-Tuple{Union{Cmd, String}, LibSSH.Session}"><code>Base.readchomp</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">readchomp(
    cmd::Union{Cmd, String},
    session::LibSSH.Session
) -&gt; SubString{String}
</code></pre><p><code>readchomp()</code> for remote commands.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L710">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.success-Tuple{Union{Cmd, String}, LibSSH.Session}" href="#Base.success-Tuple{Union{Cmd, String}, LibSSH.Session}"><code>Base.success</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">success(
    cmd::Union{Cmd, String},
    session::LibSSH.Session
) -&gt; Bool
</code></pre><p>Check the command succeeded.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L717">source</a></section></article><h4 id="Direct-port-forwarding"><a class="docs-heading-anchor" href="#Direct-port-forwarding">Direct port forwarding</a><a id="Direct-port-forwarding-1"></a><a class="docs-heading-anchor-permalink" href="#Direct-port-forwarding" title="Permalink"></a></h4><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.Forwarder" href="#LibSSH.Forwarder"><code>LibSSH.Forwarder</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct Forwarder</code></pre><ul><li><p><code>remotehost::String</code></p></li><li><p><code>remoteport::Int64</code></p></li><li><p><code>localinterface::Sockets.IPAddr</code></p></li><li><p><code>localport::Int64</code></p></li><li><p><code>out::Union{Nothing, Sockets.TCPSocket}</code></p></li><li><p><code>_listen_server::Sockets.TCPServer</code></p></li><li><p><code>_listener_task::Union{Nothing, Task}</code></p></li><li><p><code>_clients::Vector{LibSSH._ForwardingClient}</code></p></li><li><p><code>_next_client_id::Int64</code></p></li><li><p><code>_session::LibSSH.Session</code></p></li><li><p><code>verbose::Bool</code></p></li></ul><p>This object manages a direct forwarding channel between <code>localport</code> and <code>remotehost:remoteport</code>. Fields beginning with an underscore <code>_</code> are private and should not be used.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L873">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.Forwarder-Tuple{LibSSH.Session, Int64, String, Int64}" href="#LibSSH.Forwarder-Tuple{LibSSH.Session, Int64, String, Int64}"><code>LibSSH.Forwarder</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Forwarder(
    session::LibSSH.Session,
    localport::Int64,
    remotehost::String,
    remoteport::Int64;
    verbose,
    localinterface
) -&gt; LibSSH.Forwarder
</code></pre><p>Create a <code>Forwarder</code> object to forward data from <code>localport</code> to <code>remotehost:remoteport</code>. This will handle an internal <a href="#LibSSH.SshChannel"><code>SshChannel</code></a> for forwarding.</p><p><strong>Arguments</strong></p><ul><li><code>session</code>: The session to create a forwarding channel over.</li><li><code>localport</code>: The local port to bind to.</li><li><code>remotehost</code>: The remote host.</li><li><code>remoteport</code>: The remote port to bind to.</li><li><code>verbose</code>: Print logging messages on callbacks etc (not equivalent to setting <code>log_verbosity</code> on a <a href="../bindings/#Session"><code>Session</code></a>).</li><li><code>localinterface=IPv4(0)</code>: The interface to bind <code>localport</code> on.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L918">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.Forwarder-Tuple{LibSSH.Session, String, Int64}" href="#LibSSH.Forwarder-Tuple{LibSSH.Session, String, Int64}"><code>LibSSH.Forwarder</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Forwarder(
    session::LibSSH.Session,
    remotehost::String,
    remoteport::Int64;
    verbose
) -&gt; LibSSH.Forwarder
</code></pre><p>Create a <code>Forwarder</code> object that will forward its data to a single <code>TCPSocket</code>. This is useful if there is only one client and binding to a port available to other processes is not desirable. The socket will be stored in the <code>Forwarder.out</code> property, and it will be closed when the <code>Forwarder</code> is closed.</p><p>All arguments mean the same as in <a href="#LibSSH.Forwarder-Tuple{LibSSH.Session, Int64, String, Int64}"><code>Forwarder(::Session, ::Int, ::String, ::Int)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L898">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="LibSSH.Forwarder-Tuple{Function}" href="#LibSSH.Forwarder-Tuple{Function}"><code>LibSSH.Forwarder</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Forwarder(f::Function, args...; kwargs...) -&gt; Any
</code></pre><p>Do-constructor for a <code>Forwarder</code>. All arguments are forwarded to the other constructors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L964">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.close-Tuple{LibSSH.Forwarder}" href="#Base.close-Tuple{LibSSH.Forwarder}"><code>Base.close</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">close(forwarder::LibSSH.Forwarder)
</code></pre><p>Close a <code>Forwarder</code>. This will close all client channels and the listening local socket.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaWeb/LibSSH.jl/blob/bbf7fc1e151666afd1d5f3eaffb230e28edc7544/src/channel.jl#L980">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../examples/">« Examples</a><a class="docs-footer-nextpage" href="../sftp/">SFTP »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Saturday 19 October 2024 21:24">Saturday 19 October 2024</span>. Using Julia version 1.11.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
